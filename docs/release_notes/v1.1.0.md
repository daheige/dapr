  
# Dapr 1.1.0

We're happy to announce the release of Dapr 1.1.0!

We would like to extend our thanks to all the new and existing contributors who helped make this release happen.

**Highlights**

If you're new to Dapr, visit the [getting started](https://docs.dapr.io/getting-started/) page and familiarize yourself with Dapr.

Docs have been updated with all the new features and changes of this release. To get started with new capabilities introduced in this release, go to the [Concepts](https://docs.dapr.io/concepts/) and the [Developing applications](https://docs.dapr.io/developing-applications/).



See [this](#upgrading-to-dapr-1.1.0) section on upgrading Dapr to version 1.1.0.

## Acknowledgements

Thanks to everyone who made this release possible!

@1046102779, @Taction, @artursouza, @dinggh, @liamgib, @luckyxiaoqiang, @lynn-orrell, @moonchanyong, @orizohar, @pkedy, @puzpuzpuz, @tcnghia, @trondhindenes, @wcs1only, @withinboredom, @yaron2

## New in this release

### Dapr Runtime

- **RESOLVED** Avoid push of Helm chart when chart version wasn't updated [2750](https://github.com/dapr/dapr/pull/2750)

- **RESOLVED** hotfix(fswatcher): repair fswatcher fmask &error [2777](https://github.com/dapr/dapr/pull/2777)

- **RESOLVED** feat(logger): fix typo [2778](https://github.com/dapr/dapr/pull/2778)

- **RESOLVED** support(scopes): increase resource definition fault tolerance [2779](https://github.com/dapr/dapr/pull/2779)

- **RESOLVED** optimize(healthz): continuously check failed and return failure state [2781](https://github.com/dapr/dapr/pull/2781)

- **RESOLVED** Upgrade to Go 1.16 [2819](https://github.com/dapr/dapr/pull/2819)

- **RESOLVED** optimize(components): use IsInitialVersion method [2832](https://github.com/dapr/dapr/pull/2832)

- **RESOLVED** feat(components/state): state key contains characters || [2835](https://github.com/dapr/dapr/pull/2835)

- **RESOLVED** optimize(http): reduce repetitive secretstore codes  [2841](https://github.com/dapr/dapr/pull/2841)

- **RESOLVED** Bumping version of github.com/dapr/components-contrib and updating pubsub e2e test [2842](https://github.com/dapr/dapr/pull/2842)

- **RESOLVED** optimize(http): reduce network time-consuming [2845](https://github.com/dapr/dapr/pull/2845)

- **RESOLVED** fixme(fasthttp/router): upgrade fasthttp router to solve '/' [2863](https://github.com/dapr/dapr/pull/2863)

- **RESOLVED** Fix spelling of separator [2913](https://github.com/dapr/dapr/pull/2913)

- **RESOLVED** Fix read/write map race in grpc.Manager [2915](https://github.com/dapr/dapr/pull/2915)

- **RESOLVED** Fix typos in comments [2928](https://github.com/dapr/dapr/pull/2928)

- **RESOLVED** Fix typos related to placement [2959](https://github.com/dapr/dapr/pull/2959)

- **RESOLVED** Changed sidecar injector pull policy to IfNotPresent [2965](https://github.com/dapr/dapr/pull/2965)

- **RESOLVED** v1.1.0 Release Planning [2843](https://github.com/dapr/dapr/issues/2843)

- **RESOLVED** Dapr API Token should not be included in telemetry traces [2974](https://github.com/dapr/dapr/issues/2974)

### Components

- **RESOLVED** Run conf tests in release branch. [737](https://github.com/dapr/components-contrib/pull/737)

- **RESOLVED** refactor GCP pubsub [760](https://github.com/dapr/components-contrib/pull/760)

- **RESOLVED** fix pubsub redis close bug [769](https://github.com/dapr/components-contrib/pull/769)

- **RESOLVED** Local Storage Binding [752](https://github.com/dapr/components-contrib/issues/752)

### PHP SDK

- **RESOLVED** Support ActorReference type [66](https://github.com/dapr/php-sdk/issues/66)

- **ADDED** examples as e2e tests [73](https://github.com/dapr/php-sdk/issues/73)

- **RESOLVED** feat: add shutdown [80](https://github.com/dapr/php-sdk/pull/80)

- **ADDED** Dapr API token support [81](https://github.com/dapr/php-sdk/issues/81)

### Documentation

- **RESOLVED** Fix mysql name in helm and Docker in v1.1 [1273](https://github.com/dapr/docs/pull/1273)

- **RESOLVED** Append `dapr.io/env` annotation. [1301](https://github.com/dapr/docs/pull/1301)

- **RESOLVED** Component load failures are ignored and no retry is attempted when running dapr+istio [1281](https://github.com/dapr/docs/issues/1281)

- **RESOLVED** [CONTENT] Local Storage Binding Component [1337](https://github.com/dapr/docs/issues/1337)

- **RESOLVED** Update version mentions in branch v1.1 [1341](https://github.com/dapr/docs/issues/1341)

### Quickstarts

- **RESOLVED** Multiple race conditions when deploying quickstarts to Kubernetes [398](https://github.com/dapr/quickstarts/issues/398)

## Upgrading to Dapr 1.1.0

To upgrade to this release of Dapr, follow the steps here to ensure a smooth upgrade. You know, the one where you don't get red errors on the terminal.. we all hate that, right?

### Local Machine / Self-hosted

Uninstall Dapr using the CLI you currently have installed. Note that this will remove the default $HOME/.dapr directory, binaries and all containers dapr_redis, dapr_placement and dapr_zipkin. Linux users need to run sudo if docker command needs sudo:

```bash
dapr uninstall --all
```

For RC releases like this, download the latest and greatest release from [here](https://github.com/dapr/cli/releases) and put the `dapr` binary in your PATH.

Once you have installed the CLI, run:

```bash
dapr init --runtime-version=1.1.0
```

Wait for the update to finish,  ensure you are using the latest version of Dapr(1.1.0) with:

```bash
$ dapr --version

CLI version: 1.1.0
Runtime version: 1.1.0
```

### Kubernetes

#### Upgrading from previous version

You can perform zero-downtime upgrades using both Helm 3 and the Dapr CLI.

##### Upgrade using the CLI

Download the latest RC release from [here](https://github.com/dapr/cli/releases) and put the `dapr` binary in your PATH.

To upgrade Dapr, run:

```
dapr upgrade --runtime-version 1.1.0 -k
```

To upgrade with high availability mode:

```
dapr upgrade --runtime-version 1.1.0 --enable-ha=true -k
```

Wait until the operation is finished and check your status with `dapr status -k`.

All done!

*Note: Make sure your deployments are restarted to pick the latest version of the Dapr sidecar*

##### Upgrade using Helm

To upgrade Dapr using Helm, run:

```
helm repo add dapr https://dapr.github.io/helm-charts/
helm repo update

helm upgrade dapr dapr/dapr --version 1.1.0 --namespace=dapr-system --wait
```

Wait until the operation is finished and check your status with `dapr status -k`.

All done!

*Note: Make sure your deployments are restarted to pick the latest version of the Dapr sidecar*

#### Starting a fresh install on a cluster 

You can use Helm 3 to install Dapr:
```
helm repo add dapr https://dapr.github.io/helm-charts/
helm repo update

kubectl create namespace dapr-system

helm install dapr dapr/dapr --version 1.1.0 --namespace dapr-system --wait
```

Alternatively, you can use the latest version of CLI:

```
dapr init --runtime-version=1.1.0 -k
```

##### Post installation

Verify the control plane pods are running and are healthy:

```
$ dapr status -k
  NAME                   NAMESPACE    HEALTHY  STATUS   REPLICAS  VERSION  AGE  CREATED
  dapr-dashboard         dapr-system  True     Running  1         0.6.0    15s  2021-03-31 13:07.39
  dapr-sidecar-injector  dapr-system  True     Running  1         1.1.0   15s  2021-03-31 13:07.39
  dapr-sentry            dapr-system  True     Running  1         1.1.0   15s  2021-03-31 13:07.39
  dapr-operator          dapr-system  True     Running  1         1.1.0   15s  2021-03-31 13:07.39
  dapr-placement         dapr-system  True     Running  1         1.1.0   15s  2021-03-31 13:07.39
```

After Dapr 1.1.0 has been installed, perform a rolling restart for your deployments to pick up the new version of the sidecar.
This can be done with:

```
kubectl rollout restart deploy/<deployment-name>
```

## Breaking Changes

None.